{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from 'axios';\nvar API_BASE_URL = 'http://localhost:8080/api';\nvar api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 5000\n});\nvar CURRENT_EMPLOYEE_ID = 1;\nvar AttendanceService = function () {\n  function AttendanceService() {\n    _classCallCheck(this, AttendanceService);\n  }\n  return _createClass(AttendanceService, [{\n    key: \"getEmployees\",\n    value: function () {\n      var _getEmployees = _asyncToGenerator(function* () {\n        try {\n          var response = yield api.get('/employees');\n          return response.data;\n        } catch (error) {\n          console.error('Error fetching employees:', error);\n          throw error;\n        }\n      });\n      function getEmployees() {\n        return _getEmployees.apply(this, arguments);\n      }\n      return getEmployees;\n    }()\n  }, {\n    key: \"recordAttendance\",\n    value: function () {\n      var _recordAttendance = _asyncToGenerator(function* (employeeId, type) {\n        try {\n          var response = yield api.post('/attendances', {\n            employeeId: employeeId,\n            type: type,\n            timestamp: new Date().toISOString()\n          });\n          return response.data;\n        } catch (error) {\n          var _error$response;\n          if (((_error$response = error.response) == null ? void 0 : _error$response.status) === 404) {\n            throw new Error('Employee not found');\n          }\n          console.error('Error recording attendance:', error);\n          throw error;\n        }\n      });\n      function recordAttendance(_x, _x2) {\n        return _recordAttendance.apply(this, arguments);\n      }\n      return recordAttendance;\n    }()\n  }, {\n    key: \"getAttendanceHistory\",\n    value: function () {\n      var _getAttendanceHistory = _asyncToGenerator(function* () {\n        var filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        try {\n          var response = yield api.get('/attendances', {\n            params: filters\n          });\n          return response.data;\n        } catch (error) {\n          console.error('Error fetching attendance history:', error);\n          throw error;\n        }\n      });\n      function getAttendanceHistory() {\n        return _getAttendanceHistory.apply(this, arguments);\n      }\n      return getAttendanceHistory;\n    }()\n  }, {\n    key: \"getEmployeeByRfid\",\n    value: function () {\n      var _getEmployeeByRfid = _asyncToGenerator(function* (rfidTag) {\n        try {\n          var response = yield api.get('/employees', {\n            params: {\n              rfidTag: rfidTag\n            }\n          });\n          return response.data.length > 0 ? response.data[0] : null;\n        } catch (error) {\n          console.error('Error fetching employee by RFID:', error);\n          throw error;\n        }\n      });\n      function getEmployeeByRfid(_x3) {\n        return _getEmployeeByRfid.apply(this, arguments);\n      }\n      return getEmployeeByRfid;\n    }()\n  }, {\n    key: \"checkIn\",\n    value: function () {\n      var _checkIn = _asyncToGenerator(function* () {\n        var response = yield api.post(`/test-attendance/check-in/${CURRENT_EMPLOYEE_ID}`);\n        return response.data;\n      });\n      function checkIn() {\n        return _checkIn.apply(this, arguments);\n      }\n      return checkIn;\n    }()\n  }, {\n    key: \"checkOut\",\n    value: function () {\n      var _checkOut = _asyncToGenerator(function* () {\n        var response = yield api.post(`/test-attendance/check-out/${CURRENT_EMPLOYEE_ID}`);\n        return response.data;\n      });\n      function checkOut() {\n        return _checkOut.apply(this, arguments);\n      }\n      return checkOut;\n    }()\n  }, {\n    key: \"getAttendances\",\n    value: function () {\n      var _getAttendances = _asyncToGenerator(function* () {\n        var response = yield api.get(`/attendances/employee/${CURRENT_EMPLOYEE_ID}`);\n        return response.data;\n      });\n      function getAttendances() {\n        return _getAttendances.apply(this, arguments);\n      }\n      return getAttendances;\n    }()\n  }]);\n}();\nexport var attendanceService = new AttendanceService();\nexport default new AttendanceService();","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","timeout","CURRENT_EMPLOYEE_ID","AttendanceService","_classCallCheck","_createClass","key","value","_getEmployees","_asyncToGenerator","response","get","data","error","console","getEmployees","apply","arguments","_recordAttendance","employeeId","type","post","timestamp","Date","toISOString","_error$response","status","Error","recordAttendance","_x","_x2","_getAttendanceHistory","filters","length","undefined","params","getAttendanceHistory","_getEmployeeByRfid","rfidTag","getEmployeeByRfid","_x3","_checkIn","checkIn","_checkOut","checkOut","_getAttendances","getAttendances","attendanceService"],"sources":["/home/cortes/Documents/Douglas/Trabalhos e Projetos/FREELAS/PontualIoT/mobile-app/src/services/attendanceService.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:8080/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 5000,\n});\n\n// Simulação de usuário logado (em produção viria do contexto/storage)\nconst CURRENT_EMPLOYEE_ID = 1;\n\nclass AttendanceService {\n  async getEmployees() {\n    try {\n      const response = await api.get('/employees');\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching employees:', error);\n      throw error;\n    }\n  }\n\n  async recordAttendance(employeeId, type) {\n    try {\n      const response = await api.post('/attendances', {\n        employeeId,\n        type,\n        timestamp: new Date().toISOString(),\n      });\n      return response.data;\n    } catch (error) {\n      if (error.response?.status === 404) {\n        throw new Error('Employee not found');\n      }\n      console.error('Error recording attendance:', error);\n      throw error;\n    }\n  }\n\n  async getAttendanceHistory(filters = {}) {\n    try {\n      const response = await api.get('/attendances', { params: filters });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching attendance history:', error);\n      throw error;\n    }\n  }\n\n  async getEmployeeByRfid(rfidTag) {\n    try {\n      const response = await api.get('/employees', { params: { rfidTag } });\n      return response.data.length > 0 ? response.data[0] : null;\n    } catch (error) {\n      console.error('Error fetching employee by RFID:', error);\n      throw error;\n    }\n  }\n\n  // Legacy methods for backward compatibility\n  async checkIn() {\n    const response = await api.post(`/test-attendance/check-in/${CURRENT_EMPLOYEE_ID}`);\n    return response.data;\n  }\n\n  async checkOut() {\n    const response = await api.post(`/test-attendance/check-out/${CURRENT_EMPLOYEE_ID}`);\n    return response.data;\n  }\n\n  async getAttendances() {\n    const response = await api.get(`/attendances/employee/${CURRENT_EMPLOYEE_ID}`);\n    return response.data;\n  }\n}\n\nexport const attendanceService = new AttendanceService();\nexport default new AttendanceService();"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,IAAMC,YAAY,GAAG,2BAA2B;AAEhD,IAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC;EACvBC,OAAO,EAAEH,YAAY;EACrBI,OAAO,EAAE;AACX,CAAC,CAAC;AAGF,IAAMC,mBAAmB,GAAG,CAAC;AAAC,IAExBC,iBAAiB;EAAA,SAAAA,kBAAA;IAAAC,eAAA,OAAAD,iBAAA;EAAA;EAAA,OAAAE,YAAA,CAAAF,iBAAA;IAAAG,GAAA;IAAAC,KAAA;MAAA,IAAAC,aAAA,GAAAC,iBAAA,CACrB,aAAqB;QACnB,IAAI;UACF,IAAMC,QAAQ,SAASZ,GAAG,CAACa,GAAG,CAAC,YAAY,CAAC;UAC5C,OAAOD,QAAQ,CAACE,IAAI;QACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;UACjD,MAAMA,KAAK;QACb;MACF,CAAC;MAAA,SARKE,YAAYA,CAAA;QAAA,OAAAP,aAAA,CAAAQ,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAZF,YAAY;IAAA;EAAA;IAAAT,GAAA;IAAAC,KAAA;MAAA,IAAAW,iBAAA,GAAAT,iBAAA,CAUlB,WAAuBU,UAAU,EAAEC,IAAI,EAAE;QACvC,IAAI;UACF,IAAMV,QAAQ,SAASZ,GAAG,CAACuB,IAAI,CAAC,cAAc,EAAE;YAC9CF,UAAU,EAAVA,UAAU;YACVC,IAAI,EAAJA,IAAI;YACJE,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;UACpC,CAAC,CAAC;UACF,OAAOd,QAAQ,CAACE,IAAI;QACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;UAAA,IAAAY,eAAA;UACd,IAAI,EAAAA,eAAA,GAAAZ,KAAK,CAACH,QAAQ,qBAAde,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;YAClC,MAAM,IAAIC,KAAK,CAAC,oBAAoB,CAAC;UACvC;UACAb,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;UACnD,MAAMA,KAAK;QACb;MACF,CAAC;MAAA,SAfKe,gBAAgBA,CAAAC,EAAA,EAAAC,GAAA;QAAA,OAAAZ,iBAAA,CAAAF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAhBW,gBAAgB;IAAA;EAAA;IAAAtB,GAAA;IAAAC,KAAA;MAAA,IAAAwB,qBAAA,GAAAtB,iBAAA,CAiBtB,aAAyC;QAAA,IAAduB,OAAO,GAAAf,SAAA,CAAAgB,MAAA,QAAAhB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAG,CAAC,CAAC;QACrC,IAAI;UACF,IAAMP,QAAQ,SAASZ,GAAG,CAACa,GAAG,CAAC,cAAc,EAAE;YAAEwB,MAAM,EAAEH;UAAQ,CAAC,CAAC;UACnE,OAAOtB,QAAQ,CAACE,IAAI;QACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;UAC1D,MAAMA,KAAK;QACb;MACF,CAAC;MAAA,SARKuB,oBAAoBA,CAAA;QAAA,OAAAL,qBAAA,CAAAf,KAAA,OAAAC,SAAA;MAAA;MAAA,OAApBmB,oBAAoB;IAAA;EAAA;IAAA9B,GAAA;IAAAC,KAAA;MAAA,IAAA8B,kBAAA,GAAA5B,iBAAA,CAU1B,WAAwB6B,OAAO,EAAE;QAC/B,IAAI;UACF,IAAM5B,QAAQ,SAASZ,GAAG,CAACa,GAAG,CAAC,YAAY,EAAE;YAAEwB,MAAM,EAAE;cAAEG,OAAO,EAAPA;YAAQ;UAAE,CAAC,CAAC;UACrE,OAAO5B,QAAQ,CAACE,IAAI,CAACqB,MAAM,GAAG,CAAC,GAAGvB,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI;QAC3D,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;UACxD,MAAMA,KAAK;QACb;MACF,CAAC;MAAA,SARK0B,iBAAiBA,CAAAC,GAAA;QAAA,OAAAH,kBAAA,CAAArB,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAjBsB,iBAAiB;IAAA;EAAA;IAAAjC,GAAA;IAAAC,KAAA;MAAA,IAAAkC,QAAA,GAAAhC,iBAAA,CAWvB,aAAgB;QACd,IAAMC,QAAQ,SAASZ,GAAG,CAACuB,IAAI,CAAC,6BAA6BnB,mBAAmB,EAAE,CAAC;QACnF,OAAOQ,QAAQ,CAACE,IAAI;MACtB,CAAC;MAAA,SAHK8B,OAAOA,CAAA;QAAA,OAAAD,QAAA,CAAAzB,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAPyB,OAAO;IAAA;EAAA;IAAApC,GAAA;IAAAC,KAAA;MAAA,IAAAoC,SAAA,GAAAlC,iBAAA,CAKb,aAAiB;QACf,IAAMC,QAAQ,SAASZ,GAAG,CAACuB,IAAI,CAAC,8BAA8BnB,mBAAmB,EAAE,CAAC;QACpF,OAAOQ,QAAQ,CAACE,IAAI;MACtB,CAAC;MAAA,SAHKgC,QAAQA,CAAA;QAAA,OAAAD,SAAA,CAAA3B,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAR2B,QAAQ;IAAA;EAAA;IAAAtC,GAAA;IAAAC,KAAA;MAAA,IAAAsC,eAAA,GAAApC,iBAAA,CAKd,aAAuB;QACrB,IAAMC,QAAQ,SAASZ,GAAG,CAACa,GAAG,CAAC,yBAAyBT,mBAAmB,EAAE,CAAC;QAC9E,OAAOQ,QAAQ,CAACE,IAAI;MACtB,CAAC;MAAA,SAHKkC,cAAcA,CAAA;QAAA,OAAAD,eAAA,CAAA7B,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAd6B,cAAc;IAAA;EAAA;AAAA;AAMtB,OAAO,IAAMC,iBAAiB,GAAG,IAAI5C,iBAAiB,CAAC,CAAC;AACxD,eAAe,IAAIA,iBAAiB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}